<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>B·ªëc L√¨ X√¨ 2026</title>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
body{
    margin:0;
    font-family:'Segoe UI',sans-serif;
    background:linear-gradient(135deg,#8b0000,#b30000);
    color:white;
    text-align:center;
}

.container{
    max-width:600px;
    margin:auto;
    padding:20px;
}

.title{
    font-size:26px;
    font-weight:bold;
    text-shadow:0 0 15px gold;
}

.card{
    background:rgba(255,255,255,0.1);
    padding:20px;
    border-radius:18px;
    margin-top:20px;
    backdrop-filter:blur(10px);
}

button{
    padding:10px 16px;
    border:none;
    border-radius:10px;
    background:gold;
    font-weight:bold;
    cursor:pointer;
    margin:5px;
}

.amount-buttons button.active{
    background:orange;
    color:white;
}

input{
    padding:10px;
    border-radius:10px;
    border:none;
    width:90%;
    max-width:260px;
    text-align:center;
    margin:8px 0;
}

/* 5 bao l√¨ x√¨ */
.lixi-container{
    display:flex;
    justify-content:center;
    gap:15px;
    flex-wrap:wrap;
    margin-top:20px;
}

.lixi{
    width:110px;
    height:160px;
    background:linear-gradient(red,#cc0000);
    border-radius:15px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:bold;
    cursor:pointer;
    box-shadow:0 0 15px gold;
    transition:0.3s;
}

.lixi:hover{
    transform:translateY(-8px);
}

.opened{
    background:linear-gradient(gold,orange);
    color:#8b0000;
    transform:scale(1.1);
}

.result{
    font-size:24px;
    margin-top:20px;
}

#leaderboard{
    margin-top:30px;
    background:rgba(0,0,0,0.3);
    padding:15px;
    border-radius:15px;
}

.top1{color:gold;font-weight:bold;}
.top2{color:silver;font-weight:bold;}
.top3{color:#cd7f32;font-weight:bold;}

@media(max-width:500px){
    .lixi{
        width:90px;
        height:140px;
    }
}
</style>
</head>
<body>

<div class="container">

<div class="title">üßß B·ªêC 1 TRONG 5 BAO L√å X√å üßß</div>

<div id="step1" class="card">
<h3>Ch·ªçn ho·∫∑c th√™m m·ªánh gi√°</h3>

<div class="amount-buttons">
<button onclick="chonMenhGia(10000,this)">10k</button>
<button onclick="chonMenhGia(20000,this)">20k</button>
<button onclick="chonMenhGia(50000,this)">50k</button>
<button onclick="chonMenhGia(100000,this)">100k</button>
<button onclick="chonMenhGia(200000,this)">200k</button>
<button onclick="chonMenhGia(500000,this)">500k</button>
</div>

<input type="number" id="customAmount" placeholder="Nh·∫≠p m·ªánh gi√° th√™m">
<br>
<button onclick="themMenhGia()">Th√™m m·ªánh gi√°</button>
<br><br>
<button onclick="xacNhanMenhGia()">Ti·∫øp t·ª•c</button>
</div>

<div id="step2" class="card" style="display:none;">
<h3>Nh·∫≠p t√™n c·ªßa b·∫°n</h3>
<input type="text" id="playerName">
<br>
<button onclick="hienBaoLiXi()">Hi·ªán 5 bao</button>
</div>

<div id="step3" class="card" style="display:none;">
<h3>Ch·ªçn 1 bao may m·∫Øn</h3>
<div class="lixi-container" id="lixiContainer"></div>
<div class="result" id="ketqua"></div>
</div>

<div id="leaderboard">
<h3>üèÜ B·∫¢NG X·∫æP H·∫†NG</h3>
<div id="bxh"></div>
<button onclick="resetBXH()">Reset BXH</button>
</div>

</div>

<!-- Nh·∫°c n·ªÅn -->
<audio id="bgMusic" loop>
<source src="kk.mp3" type="audio/mpeg">
</audio>

<script>

let danhSachMenhGia=[];
let leaderboard=JSON.parse(localStorage.getItem("leaderboard"))||{};
let musicStarted=false;

function chonMenhGia(value,btn){
    if(danhSachMenhGia.includes(value)){
        danhSachMenhGia=danhSachMenhGia.filter(v=>v!==value);
        btn.classList.remove("active");
    }else{
        danhSachMenhGia.push(value);
        btn.classList.add("active");
    }
}

function themMenhGia(){
    let value=parseInt(document.getElementById("customAmount").value);
    if(!value||value<=0){alert("Nh·∫≠p s·ªë h·ª£p l·ªá");return;}
    danhSachMenhGia.push(value);
    alert("ƒê√£ th√™m "+value.toLocaleString('vi-VN')+"ƒë");
    document.getElementById("customAmount").value="";
}

function xacNhanMenhGia(){
    if(danhSachMenhGia.length===0){
        alert("Ch·ªçn √≠t nh·∫•t 1 m·ªánh gi√°!");
        return;
    }
    document.getElementById("step1").style.display="none";
    document.getElementById("step2").style.display="block";
}

function hienBaoLiXi(){
    let ten=document.getElementById("playerName").value;
    if(!ten){alert("Nh·∫≠p t√™n!");return;}

    document.getElementById("step2").style.display="none";
    document.getElementById("step3").style.display="block";

    let container=document.getElementById("lixiContainer");
    container.innerHTML="";

    for(let i=0;i<5;i++){
        let div=document.createElement("div");
        div.className="lixi";
        div.innerHTML="üßß";
        div.onclick=function(){moBao(this)};
        container.appendChild(div);
    }
}

function moBao(element){

    if(element.classList.contains("opened")) return;

    // b·∫≠t nh·∫°c khi click l·∫ßn ƒë·∫ßu
    if(!musicStarted){
        document.getElementById("bgMusic").play();
        musicStarted=true;
    }

    let ten=document.getElementById("playerName").value;
    let randomIndex=Math.floor(Math.random()*danhSachMenhGia.length);
    let tien=danhSachMenhGia[randomIndex];

    element.classList.add("opened");
    element.innerHTML=tien.toLocaleString('vi-VN')+"ƒë";

    document.getElementById("ketqua").innerHTML=
    "üéâ "+ten+" nh·∫≠n ƒë∆∞·ª£c <span style='color:gold'>"+
    tien.toLocaleString('vi-VN')+"ƒë</span>";

    confetti({particleCount:200,spread:100,origin:{y:0.6}});

    if(!leaderboard[ten]) leaderboard[ten]=0;
    leaderboard[ten]+=tien;

    localStorage.setItem("leaderboard",JSON.stringify(leaderboard));
    capNhatBXH();
}

function capNhatBXH(){
    let bxh=document.getElementById("bxh");
    let sorted=Object.entries(leaderboard).sort((a,b)=>b[1]-a[1]);
    bxh.innerHTML="";
    sorted.forEach((item,index)=>{
        let cls="";
        if(index===0) cls="top1";
        if(index===1) cls="top2";
        if(index===2) cls="top3";
        bxh.innerHTML+=`<div class="${cls}">
        ${index+1}. ${item[0]} - ${item[1].toLocaleString('vi-VN')}ƒë
        </div>`;
    });
}

function resetBXH(){
    if(confirm("Reset b·∫£ng x·∫øp h·∫°ng?")){
        localStorage.removeItem("leaderboard");
        leaderboard={};
        capNhatBXH();
    }
}

capNhatBXH();

</script>

</body>
</html>
